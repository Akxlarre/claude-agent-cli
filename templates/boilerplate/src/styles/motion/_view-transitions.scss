/* ============================================
   View Transitions API — Page & Theme Transitions
   - Navegación: anima solo main-content (topbar/sidebar estáticos)
   - Cambio de tema: reveal circular en main-content desde el clic
   ============================================ */

/* Root: topbar + sidebar — sin animación, permanecen estáticos */
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
}

/* Cambio de tema: reveal circular solo en main-content (types: ['theme']) */
html:active-view-transition-type(theme) {
  &::view-transition-old(main-content) {
    animation: theme-main-fade-out var(--duration-theme) ease both;
  }
  &::view-transition-new(main-content) {
    animation: theme-main-reveal var(--duration-theme) ease both;
  }
}

@keyframes theme-main-fade-out {
  to {
    opacity: 0;
  }
}

@keyframes theme-main-reveal {
  from {
    clip-path: circle(0 at var(--theme-origin-x, 50%) var(--theme-origin-y, 0%));
  }
  to {
    clip-path: circle(150vmax at var(--theme-origin-x, 50%) var(--theme-origin-y, 0%));
  }
}

/* Main content: salida rápida (180ms), hacia arriba -6px (navegación rutas) */
::view-transition-old(main-content) {
  animation: var(--duration-page-out) cubic-bezier(0.4, 0, 1, 1) both page-out;
}

/* Main content: entrada suave (280ms), desde abajo +8px (navegación rutas) */
::view-transition-new(main-content) {
  animation: var(--duration-page-in) cubic-bezier(0, 0, 0.2, 1) both page-in;
}

@keyframes page-out {
  to {
    opacity: 0;
    transform: translateY(-6px);
  }
}

@keyframes page-in {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Accesibilidad: respetar prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  ::view-transition-old(main-content),
  ::view-transition-new(main-content) {
    animation: none;
  }
  html:active-view-transition-type(theme) {
    &::view-transition-old(main-content),
    &::view-transition-new(main-content) {
      animation: none;
    }
  }
}
