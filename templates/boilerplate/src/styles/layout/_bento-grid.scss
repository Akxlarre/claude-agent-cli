/* ============================================================
   BENTO GRID SYSTEM v2
   
   Arquitectura de dos capas:
     1. Clases de proporción  → describen la FORMA de la celda
     2. data-attributes       → control de placement EXACTO
   
   Breakpoints: 640px · 768px · 1024px
   Columnas:    1 → 4 → 8 → 12
   ============================================================ */

/* ── 1. DESIGN TOKENS ─────────────────────────────────────── */
:root {
    /* Espaciado */
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
  
    /* ── Variables del Grid (EXPUESTAS para personalización) ── */
    --bento-cols-mobile: 1;
    --bento-cols-sm:     4;
    --bento-cols-md:     8;
    --bento-cols-lg:     12;
  
    --bento-row-min: 120px;
    --bento-row-max: auto;
  
    --bento-gap-mobile: var(--space-3);
    --bento-gap-sm:     var(--space-3);
    --bento-gap-md:     var(--space-4);
    --bento-gap-lg:     var(--space-5);
  
    --bento-pad-mobile: var(--space-4);
    --bento-pad-sm:     var(--space-5);
    --bento-pad-md:     var(--space-6);
    --bento-pad-lg:     var(--space-8);
  }
  
  /* ── 2. GRID CONTAINER ─────────────────────────────────────── */
  .bento-grid {
    display: grid;
    grid-template-columns: repeat(var(--bento-cols-mobile), minmax(0, 1fr));
    grid-auto-rows: minmax(var(--bento-row-min), var(--bento-row-max));
    grid-auto-flow: dense;
    gap: var(--bento-gap-mobile);
    padding: var(--bento-pad-mobile);
  }
  
  @media (min-width: 640px) {
    .bento-grid {
      grid-template-columns: repeat(var(--bento-cols-sm), minmax(0, 1fr));
      gap: var(--bento-gap-sm);
      padding: var(--bento-pad-sm);
    }
  }
  
  @media (min-width: 768px) {
    .bento-grid {
      grid-template-columns: repeat(var(--bento-cols-md), minmax(0, 1fr));
      gap: var(--bento-gap-md);
      padding: var(--bento-pad-md);
    }
  }
  
  @media (min-width: 1024px) {
    .bento-grid {
      grid-template-columns: repeat(var(--bento-cols-lg), minmax(0, 1fr));
      gap: var(--bento-gap-lg);
      padding: var(--bento-pad-lg);
    }
  }
  
  /* ── 3. CLASES DE PROPORCIÓN ───────────────────────────────────
     
     Cada clase describe la INTENCIÓN visual, no valores absolutos.
     
     Clase          Mobile    sm (4)   md (8)   lg (12)
     ──────────────────────────────────────────────────
     bento-square   full      2        2        3
     bento-wide     full      4        4        6
     bento-tall     full+2r   2+2r     2+2r     3+2r
     bento-feature  full+2r   4+2r     6+2r     8+2r
     bento-hero     1/-1+2r   1/-1+2r  1/-1+2r  1/-1+2r
     bento-banner   1/-1      1/-1     1/-1     1/-1
     ──────────────────────────────────────────────────
     r = row span
     ─────────────────────────────────────────────────── */
  
  /* Square: celda cuadrada estándar */
  .bento-square {
    grid-column: span var(--bento-cols-mobile);
  }
  @media (min-width: 640px) {
    .bento-square { grid-column: span 2; grid-row: span 1; }
  }
  @media (min-width: 768px) {
    .bento-square { grid-column: span 2; }
  }
  @media (min-width: 1024px) {
    .bento-square { grid-column: span 3; }
  }
  
  /* Wide: proporción 2:1 horizontal */
  .bento-wide {
    grid-column: span var(--bento-cols-mobile);
  }
  @media (min-width: 640px) {
    .bento-wide { grid-column: span 4; }
  }
  @media (min-width: 768px) {
    .bento-wide { grid-column: span 4; }
  }
  @media (min-width: 1024px) {
    .bento-wide { grid-column: span 6; }
  }
  
  /* Tall: columna alta, 2 filas */
  .bento-tall {
    grid-column: span var(--bento-cols-mobile);
    grid-row: span 2;
  }
  @media (min-width: 640px) {
    .bento-tall { grid-column: span 2; grid-row: span 2; }
  }
  @media (min-width: 768px) {
    .bento-tall { grid-column: span 2; grid-row: span 2; }
  }
  @media (min-width: 1024px) {
    .bento-tall { grid-column: span 3; grid-row: span 2; }
  }
  
  /* Feature: elemento protagonista, 2/3 del ancho + doble alto */
  .bento-feature {
    grid-column: span var(--bento-cols-mobile);
    grid-row: span 2;
  }
  @media (min-width: 640px) {
    .bento-feature { grid-column: span 4; grid-row: span 2; }
  }
  @media (min-width: 768px) {
    .bento-feature { grid-column: span 6; grid-row: span 2; }
  }
  @media (min-width: 1024px) {
    .bento-feature { grid-column: span 8; grid-row: span 2; }
  }
  
  /* Hero: full-width con 1/-1 — siempre se expande al total de columnas */
  .bento-hero {
    grid-column: 1 / -1;
    grid-row: span 2;
  }
  
  /* Banner: full-width, una fila */
  .bento-banner {
    grid-column: 1 / -1;
    grid-row: span 1;
  }

  /* ── 3b. ALIAS LEGACY (bento-1x1, 2x2, etc.) ───────────────────
     
     Mantiene compatibilidad con componentes existentes que usan
     tamaños expresados como NxM. Se mapean a las proporciones v2:
       1x1 → bento-square
       2x1/3x1/4x1 → bento-wide
       2x2 → bento-tall
       3x2 → bento-feature
       hero → bento-hero
  */

  /* 1x1: alias de bento-square */
  .bento-1x1 {
    grid-column: span var(--bento-cols-mobile);
  }
  @media (min-width: 640px) {
    .bento-1x1 { grid-column: span 2; grid-row: span 1; }
  }
  @media (min-width: 768px) {
    .bento-1x1 { grid-column: span 2; }
  }
  @media (min-width: 1024px) {
    .bento-1x1 { grid-column: span 3; }
  }

  /* 2x1 / 3x1 / 4x1: alias de bento-wide */
  .bento-2x1,
  .bento-3x1,
  .bento-4x1 {
    grid-column: span var(--bento-cols-mobile);
  }
  @media (min-width: 640px) {
    .bento-2x1,
    .bento-3x1,
    .bento-4x1 { grid-column: span 4; }
  }
  @media (min-width: 768px) {
    .bento-2x1,
    .bento-3x1,
    .bento-4x1 { grid-column: span 4; }
  }
  @media (min-width: 1024px) {
    .bento-2x1,
    .bento-3x1,
    .bento-4x1 { grid-column: span 6; }
  }

  /* 2x2: alias de bento-tall (columna media, doble alto) */
  .bento-2x2 {
    grid-column: span var(--bento-cols-mobile);
    grid-row: span 2;
  }
  @media (min-width: 640px) {
    .bento-2x2 { grid-column: span 2; grid-row: span 2; }
  }
  @media (min-width: 768px) {
    .bento-2x2 { grid-column: span 2; grid-row: span 2; }
  }
  @media (min-width: 1024px) {
    .bento-2x2 { grid-column: span 3; grid-row: span 2; }
  }

  /* 3x2: alias de bento-feature (protagonista, 2/3 ancho + doble alto) */
  .bento-3x2 {
    grid-column: span var(--bento-cols-mobile);
    grid-row: span 2;
  }
  @media (min-width: 640px) {
    .bento-3x2 { grid-column: span 4; grid-row: span 2; }
  }
  @media (min-width: 768px) {
    .bento-3x2 { grid-column: span 6; grid-row: span 2; }
  }
  @media (min-width: 1024px) {
    .bento-3x2 { grid-column: span 8; grid-row: span 2; }
  }

  /* hero: alias directo de bento-hero */
  .bento-hero {
    grid-column: 1 / -1;
    grid-row: span 2;
  }
  
  /* ── 4. CAPA DE PLACEMENT (data-attributes) ──────────────────
     
     Uso: complementar o sobreescribir la clase de proporción
     cuando necesitas posición o tamaño exacto.
     
     Ejemplo:
     <div class="bento-square"
          data-col-span="4"
          data-col-start="7"
          data-row-span="2">
     
     Solo activo en desktop (1024px+) para no romper el flujo
     responsive en breakpoints menores.
     ─────────────────────────────────────────────────────────── */
  
  @media (min-width: 1024px) {
  
    /* Column spans */
    [data-col-span="1"]  { grid-column: span 1; }
    [data-col-span="2"]  { grid-column: span 2; }
    [data-col-span="3"]  { grid-column: span 3; }
    [data-col-span="4"]  { grid-column: span 4; }
    [data-col-span="5"]  { grid-column: span 5; }
    [data-col-span="6"]  { grid-column: span 6; }
    [data-col-span="7"]  { grid-column: span 7; }
    [data-col-span="8"]  { grid-column: span 8; }
    [data-col-span="9"]  { grid-column: span 9; }
    [data-col-span="10"] { grid-column: span 10; }
    [data-col-span="11"] { grid-column: span 11; }
    [data-col-span="12"] { grid-column: span 12; }
  
    /* Column starts — para anclar un item a una columna específica */
    [data-col-start="1"]  { grid-column-start: 1; }
    [data-col-start="2"]  { grid-column-start: 2; }
    [data-col-start="3"]  { grid-column-start: 3; }
    [data-col-start="4"]  { grid-column-start: 4; }
    [data-col-start="5"]  { grid-column-start: 5; }
    [data-col-start="6"]  { grid-column-start: 6; }
    [data-col-start="7"]  { grid-column-start: 7; }
    [data-col-start="8"]  { grid-column-start: 8; }
    [data-col-start="9"]  { grid-column-start: 9; }
    [data-col-start="10"] { grid-column-start: 10; }
    [data-col-start="11"] { grid-column-start: 11; }
  
    /* Row spans */
    [data-row-span="1"] { grid-row: span 1; }
    [data-row-span="2"] { grid-row: span 2; }
    [data-row-span="3"] { grid-row: span 3; }
    [data-row-span="4"] { grid-row: span 4; }
  }
  
  /* ── 5. CARD COMPONENT ───────────────────────────────────────
     
     Componente interno recomendado para las celdas del grid.
     Independiente del sistema de grid en sí.
     ─────────────────────────────────────────────────────────── */
  .bento-card {
    position: relative;
    overflow: hidden;
    border-radius: 16px;
    padding: var(--space-5);
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    /* Previene blowout del contenido */
    min-height: 0;
    min-width: 0;
  }
  
  /* Variante sin padding — para imágenes full-bleed */
  .bento-card--flush {
    padding: 0;
  }
  .bento-card--flush > .bento-card__body {
    padding: var(--space-5);
  }
  
  /* Cuerpo interno con control de alineación vertical */
  .bento-card__body {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    flex: 1;
  }
  .bento-card__body--bottom   { justify-content: flex-end; }
  .bento-card__body--center   { justify-content: center; align-items: center; text-align: center; }
  .bento-card__body--spread   { justify-content: space-between; }
  
  /* ── 6. MEDIA UTILITIES ──────────────────────────────────────
     
     Para celdas con imagen/medio visual. Garantizan que la imagen
     llene la celda (object-fit: cover) sin deformar el grid.
     ─────────────────────────────────────────────────────────── */
  .bento-media {
    position: relative;
    width: 100%;
    height: 100%;
  }
  
  .bento-media img,
  .bento-media video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
  
  .bento-media--top img,
  .bento-media--top video {
    object-position: top center;
  }
  
  .bento-media--center img,
  .bento-media--center video {
    object-position: center;
  }
  
  .bento-media--left img,
  .bento-media--left video {
    object-position: center left;
  }
  
  /* ── 7. ACCESIBILIDAD ────────────────────────────────────────
     
     IMPORTANTE: dense flow puede desincronizar el orden visual
     del orden DOM. Cuando esto ocurra:
     
     1. Asegúrate de que el orden DOM sea lógico para lectores
        de pantalla (AT navega el DOM, no la posición visual).
     
     2. Si el orden visual es crítico para entender el contenido,
        considera usar grid-template-areas en lugar de dense flow
        para esa sección específica.
     
     3. Cuando uses data-col-start para anclar items, verifica
        que el orden DOM coincida con el orden visual para
        navegación por teclado y lectores de pantalla.
     ─────────────────────────────────────────────────────────── */
  
  @media (prefers-reduced-motion: reduce) {
    .bento-grid,
    .bento-grid * {
      transition: none !important;
      animation: none !important;
    }
  }