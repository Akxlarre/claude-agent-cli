/* ============================================================
   {{PROJECT_NAME}} — Design System Tokens
   Design System Base para boilerplate Angular + PrimeNG
   ============================================================

   ARQUITECTURA DE CAPAS:
   ┌─────────────────────────────────────────────────────────┐
   │  CAPA 1 — Escala       Colores, espaciados, radios      │
   │  CAPA 2 — Semántica    Superficies, texto, bordes       │
   │  CAPA 3 — Marca        Brand, gradientes, acciones      │
   │  CAPA 4 — Componentes  Btn, input, card, motion         │
   └─────────────────────────────────────────────────────────┘

   REGLAS:
   - Los tokens de escala describen el universo visual.
     No se usan directamente en componentes.
   - Los tokens de componente referencian tokens de escala.
     Si un token de componente tiene un valor fijo (#hex o px),
     no sobrevivirá un cambio de tema.
   - --action-* / --ds-brand / --color-primary → acciones de marca.
   - --text-* → jerarquía tipográfica. NUNCA mezclar con --action-*.
   - Tokens de motion guardan VALORES, no propiedades CSS.
     ✓ --card-hover-lift-y: -2px (componible)
     ✗ --card-hover-lift: translateY(-2px) (no componible)
   ============================================================ */


/* ============================================================
   LIGHT MODE — Variables raíz
   ============================================================ */
:root {

   /* ──────────────────────────────────────────
     CAPA 1 — ESCALA PRIMITIVA
     Valores base del universo visual.
     No referencian otros tokens.
     No se usan directamente en componentes.
   ────────────────────────────────────────── */

   /* Escala de radio */
   --radius-sm: 6px;
   --radius-md: 10px;
   --radius-lg: 14px;
   --radius-xl: 20px;
   --radius-2xl: 28px;
   --radius-full: 9999px;

   /* Escala de espaciado (base 4px) */
   --space-1: 4px;
   --space-2: 8px;
   --space-3: 12px;
   --space-4: 16px;
   --space-5: 20px;
   --space-6: 24px;
   --space-8: 32px;
   --space-10: 40px;
   --space-12: 48px;
   --space-16: 64px;

   /* Escala tipográfica */
   --text-xs: 0.75rem;
   /* 12px */
   --text-sm: 0.875rem;
   /* 14px */
   --text-base: 1rem;
   /* 16px */
   --text-lg: 1.125rem;
   /* 18px */
   --text-xl: 1.25rem;
   /* 20px */
   --text-2xl: 1.5rem;
   /* 24px */
   --text-3xl: 1.875rem;
   /* 30px */
   --text-4xl: 2.25rem;
   /* 36px */
   --text-5xl: 3rem;
   /* 48px */

   --font-regular: 400;
   --font-medium: 500;
   --font-semibold: 600;
   --font-bold: 700;

   --leading-tight: 1.25;
   --leading-snug: 1.375;
   --leading-normal: 1.5;
   --leading-relaxed: 1.625;

   /* Familias tipográficas
      Bricolage Grotesque: importada via Google Fonts en styles.scss
      Fallback: system-ui para máxima compatibilidad cross-platform */
   --font-display: 'Bricolage Grotesque', system-ui, sans-serif;
   --font-body: 'Bricolage Grotesque', system-ui, sans-serif;
   --font-mono: 'JetBrains Mono', ui-monospace, monospace;

   /* Escala de duración */
   --duration-instant: 100ms;
   --duration-fast: 200ms;
   --duration-normal: 300ms;
   --duration-slow: 450ms;
   --duration-slower: 600ms;
   --duration-page-out: 180ms;
   --duration-page-in: 280ms;
   /* Asimetría intencional: salida rápida, entrada suave */
   --duration-theme: 220ms;

   /* Escala de easing */
   --ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
   --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
   --ease-out: cubic-bezier(0, 0, 0.2, 1);
   --ease-in: cubic-bezier(0.4, 0, 1, 1);

   /* Alias legacy (compatibilidad) */
   --motion-ease-standard: var(--ease-standard);
   --motion-duration-fast: var(--duration-fast);


   /* ──────────────────────────────────────────
     CAPA 2 — SEMÁNTICA DE SUPERFICIE
     Describen roles visuales, no valores.
     Jerarquía de luminosidad garantizada.
   ────────────────────────────────────────── */

   /* Fondos y superficies
     bg-base    L:96%  — fondo de la app
     bg-surface L:100% — tarjetas, modales, sidebar
     bg-elevated L:98% — hover de filas, áreas diferenciadas
     bg-subtle  L:90%  — inputs, chips, separadores */
   --bg-base: #f4f4f5;
   --bg-surface: #ffffff;
   --bg-elevated: #fafafa;
   --bg-subtle: #e4e4e7;

   /* Puente para color-mix */
   --bg-surface-mix: #ffffff;
   --bg-glass-surface: rgba(255, 255, 255, 0.92);

   /* Tipografía — jerarquía de texto
     NUNCA usar para fondos ni acciones */
   --text-primary: #09090b;
   --text-secondary: #52525b;
   --text-muted: #a1a1aa;
   --text-disabled: #d4d4d8;

   /* Bordes */
   --border-subtle: rgba(9, 9, 11, 0.06);
   --border-default: rgba(9, 9, 11, 0.12);
   --border-strong: rgba(9, 9, 11, 0.20);

   /* Sombras */
   --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
   --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.05),
      0 2px 4px -2px rgba(0, 0, 0, 0.05);
   --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.05),
      0 4px 6px -4px rgba(0, 0, 0, 0.02);

   --shadow-layout-topbar: 0 1px 3px rgba(0, 0, 0, 0.04);
   --shadow-layout-sidebar: 4px 0 24px -4px rgba(0, 0, 0, 0.03),
      1px 0 0 0 var(--border-subtle);
   --shadow-layout-divider: 1px 0 0 0 var(--border-subtle);
   --overlay-backdrop: rgba(9, 9, 11, 0.40);

   /* Estados semánticos
     state-* = resultado de acciones del sistema
     ("guardado con éxito", "error de formulario", "información") */
   --state-success: #16a34a;
   --state-success-bg: #f0fdf4;
   --state-success-border: #bbf7d0;

   --state-warning: #d97706;
   --state-warning-bg: #fffbeb;
   --state-warning-border: #fde68a;

   --state-error: #dc2626;
   --state-error-bg: #fef2f2;
   --state-error-border: #fecaca;

   --state-info: #0284c7;
   --state-info-bg: #f0f9ff;
   --state-info-border: #bae6fd;


   /* ──────────────────────────────────────────
     CAPA 3 — MARCA Y COLOR PRIMARIO
     --color-primary SIEMPRE es el azul de marca.
     Nunca apunta a --text-primary.
   ────────────────────────────────────────── */

   /* Azul de marca */
   --ds-brand: #2563eb;
   --color-primary: #2563eb;
   --color-primary-hover: #1d4ed8;
   --color-primary-dark: #1e40af;
   --color-primary-muted: rgba(37, 99, 235, 0.08);
   --color-primary-tint: rgba(37, 99, 235, 0.04);
   --color-primary-text: #ffffff;
   --accent-border: rgba(37, 99, 235, 0.20);
   --accent-glow: rgba(37, 99, 235, 0.15);
   --shadow-focus: 0 0 0 3px rgba(37, 99, 235, 0.08);

   /* Gradientes */
   --gradient-primary: linear-gradient(135deg, #2563eb 0%, #6366f1 100%);
   --gradient-hero: linear-gradient(135deg,
         #2563eb 0%,
         #6366f1 50%,
         #8b5cf6 100%);
   --gradient-subtle: linear-gradient(135deg,
         rgba(37, 99, 235, 0.06) 0%,
         rgba(37, 99, 235, 0.02) 100%);

   /* Aliases semánticos — separación: acción ≠ texto */
   --action-primary: var(--ds-brand);
   --action-primary-hover: var(--color-primary-hover);
   --action-primary-text: var(--color-primary-text);
   --color-brand: var(--ds-brand);


   /* ──────────────────────────────────────────
     CAPA 4 — COMPONENTES
     Cero valores fijos — todo referencia tokens
     de escala para soportar theming.
   ────────────────────────────────────────── */

   /* ── Botón primario ── */
   --btn-primary-bg: var(--ds-brand);
   --btn-primary-bg-hover: var(--color-primary-hover);
   --btn-primary-text: var(--color-primary-text);
   --btn-primary-radius: var(--radius-md);
   --btn-primary-padding-x: var(--space-4);
   --btn-primary-padding-y: var(--space-3);
   --btn-primary-shadow: var(--shadow-sm);
   --btn-primary-shadow-hover: var(--shadow-md);

   /* ── Botón secundario ── */
   --btn-secondary-bg: transparent;
   --btn-secondary-bg-hover: var(--color-primary-muted);
   --btn-secondary-border: var(--border-default);
   --btn-secondary-text: var(--color-primary);
   --btn-secondary-radius: var(--radius-md);

   /* ── Botón ghost / terciario ── */
   --btn-ghost-bg: transparent;
   --btn-ghost-bg-hover: var(--bg-subtle);
   --btn-ghost-text: var(--text-secondary);
   --btn-ghost-text-hover: var(--text-primary);
   --btn-ghost-radius: var(--radius-md);

   /* ── Input ──
     --input-bg referencia --bg-subtle (visible sobre --bg-elevated
     en ambos temas). Incluye todos los estados: default, focus,
     error, success, disabled. */
   --input-bg: var(--bg-subtle);
   --input-text: var(--text-primary);
   --input-placeholder: var(--text-muted);
   --input-radius: var(--radius-md);
   --input-padding-x: var(--space-4);
   --input-padding-y: var(--space-3);

   --input-border-default: var(--border-default);
   --input-border-focus: var(--color-primary);
   --input-border-error: var(--state-error);
   --input-border-success: var(--state-success);

   /* Focus: crítico para navegación por teclado.
     Ningún componente suprime outline nativo sin reemplazar con este token. */
   --input-shadow-focus-neutral: var(--shadow-focus);
   --input-shadow-focus-error: 0 0 0 3px var(--state-error-bg);
   --input-shadow-focus-success: 0 0 0 3px var(--state-success-bg);

   --input-disabled-bg: var(--bg-subtle);
   --input-disabled-text: var(--text-disabled);
   --input-disabled-opacity: 0.6;

   /* ── Card ── */
   --card-bg: var(--bg-surface);
   --card-border: var(--border-subtle);
   --card-radius: var(--radius-lg);
   --card-shadow: var(--shadow-md);
   --card-shadow-hover: var(--shadow-lg);
   --card-padding: var(--space-6);
   --accent-border-width: 3px;

   /* ── Badge ── */
   --badge-radius: var(--radius-full);
   --badge-padding-x: var(--space-3);
   --badge-padding-y: var(--space-1);

   /* ── Overlay / Modal ── */
   --modal-bg: var(--bg-surface);
   --modal-radius: var(--radius-xl);
   --modal-shadow: var(--shadow-lg);
   --modal-padding: var(--space-8);

   /* ── Motion de componentes ──
     Tokens guardan VALORES, no propiedades CSS.
     El componente construye la propiedad CSS usando el valor.

     Uso correcto:
     .card:hover { transform: translateY(var(--card-hover-lift-y)); } */
   --btn-press-scale-value: 0.97;
   --card-hover-lift-y: -2px;
   --card-hover-scale: 1.005;

   --transition-btn:
      background-color var(--duration-fast) var(--ease-standard),
      box-shadow var(--duration-fast) var(--ease-standard),
      transform var(--duration-fast) var(--ease-standard),
      color var(--duration-fast) var(--ease-standard);

   --transition-input:
      border-color var(--duration-fast) var(--ease-standard),
      box-shadow var(--duration-fast) var(--ease-standard);

   --transition-card:
      box-shadow var(--duration-normal) var(--ease-standard),
      transform var(--duration-normal) var(--ease-standard);

   --transition-color:
      color var(--duration-fast) var(--ease-standard),
      background-color var(--duration-fast) var(--ease-standard),
      border-color var(--duration-fast) var(--ease-standard);
}


/* ============================================================
   DARK MODE — [data-mode='dark']
   Jerarquía de luminosidad garantizada:
     bg-base     L:6%
     bg-surface  L:11% → delta +5% ✓
     bg-elevated L:16% → delta +5% ✓
     bg-subtle   L:18.8% → delta +2.8% ✓
   ============================================================ */
[data-mode='dark'] {

   /* ── Capa 2: Superficies ── */
   --bg-base: #09090b;
   --bg-surface: #18181b;
   --bg-elevated: #27272a;
   --bg-subtle: #2d2d30;

   --bg-surface-mix: #27272a;
   --bg-glass-surface: rgba(24, 24, 27, 0.85);

   /* ── Capa 2: Tipografía ── */
   --text-primary: #f4f4f5;
   --text-secondary: #a1a1aa;
   --text-muted: #71717a;
   --text-disabled: #52525b;

   /* ── Capa 2: Bordes ──
     Opacidades aumentadas para WCAG 1.4.11 (Non-text Contrast).
     Inputs sobre --bg-subtle necesitan ratio 3:1 contra su contenedor. */
   --border-subtle: rgba(255, 255, 255, 0.04);
   --border-default: rgba(255, 255, 255, 0.12);
   --border-strong: rgba(255, 255, 255, 0.20);

   /* ── Capa 2: Sombras (micro-bordes en dark) ── */
   --shadow-sm: 0 0 0 1px var(--border-subtle);
   --shadow-md: 0 0 0 1px var(--border-default),
      0 4px 16px rgba(0, 0, 0, 0.40);
   --shadow-lg: 0 0 0 1px var(--border-default),
      0 8px 32px rgba(0, 0, 0, 0.60);

   --shadow-layout-topbar: 0 1px 0 0 var(--border-subtle);
   --shadow-layout-sidebar: 1px 0 0 0 var(--border-subtle);
   --shadow-layout-divider: 1px 0 0 0 var(--border-subtle);
   --overlay-backdrop: rgba(0, 0, 0, 0.70);

   /* ── Capa 2: Estados semánticos (glass effect) ── */
   --state-success: #4ade80;
   --state-success-bg: rgba(74, 222, 128, 0.10);
   --state-success-border: rgba(74, 222, 128, 0.20);

   --state-warning: #fbbf24;
   --state-warning-bg: rgba(251, 191, 36, 0.10);
   --state-warning-border: rgba(251, 191, 36, 0.20);

   --state-error: #f87171;
   --state-error-bg: rgba(248, 113, 113, 0.10);
   --state-error-border: rgba(248, 113, 113, 0.20);

   --state-info: #38bdf8;
   --state-info-bg: rgba(56, 189, 248, 0.10);
   --state-info-border: rgba(56, 189, 248, 0.20);

   /* ── Capa 3: Marca (WCAG compliant en dark) ──
     #3b82f6 más luminoso que #2563eb para pasar contraste. */
   --ds-brand: #3b82f6;
   --color-primary: #3b82f6;
   --color-primary-hover: #60a5fa;
   --color-primary-dark: #2563eb;
   --color-primary-muted: rgba(59, 130, 246, 0.15);
   --color-primary-tint: rgba(59, 130, 246, 0.08);
   --color-primary-text: #ffffff;
   --accent-border: rgba(59, 130, 246, 0.25);
   --accent-glow: rgba(59, 130, 246, 0.25);
   --shadow-focus: 0 0 0 3px rgba(59, 130, 246, 0.30);

   --gradient-primary: linear-gradient(135deg, #3b82f6 0%, #818cf8 100%);
   --gradient-hero: linear-gradient(135deg,
         #3b82f6 0%,
         #818cf8 50%,
         #a78bfa 100%);
   --gradient-subtle: linear-gradient(135deg,
         rgba(59, 130, 246, 0.12) 0%,
         rgba(59, 130, 246, 0.04) 100%);

   --action-primary: var(--ds-brand);
   --action-primary-hover: var(--color-primary-hover);
   --action-primary-text: var(--color-primary-text);
   --color-brand: var(--ds-brand);

   /* ── Capa 4: Componentes (solo overrides necesarios) ──
     La mayoría de tokens de componente propagan automáticamente
     porque referencian tokens de escala. Solo se redefinen
     los que necesitan ajuste explícito en dark. */
   --input-bg: var(--bg-subtle);
   --input-disabled-bg: var(--bg-elevated);

   --card-bg: var(--bg-surface);
   --card-border: var(--border-subtle);
}


/* ============================================================
   ESTILOS BASE
   ============================================================ */

h1,
h2,
h3 {
   font-family: var(--font-display);
}

body {
   font-family: var(--font-body);
   background: var(--bg-base);
   color: var(--text-primary);
   -webkit-font-smoothing: antialiased;
   -moz-osx-font-smoothing: grayscale;
   transition:
      background-color var(--duration-theme) var(--ease-standard),
      color var(--duration-theme) var(--ease-standard),
      border-color var(--duration-theme) var(--ease-standard);
}


/* ============================================================
   GUÍA DE USO — REGLAS DEL SISTEMA

   REGLA 1 — Color de acción
   Usar --action-primary / --ds-brand / --color-primary
   para botones, CTAs, links, iconos de acción.

   REGLA 2 — Color de texto
   Usar --text-primary / --text-secondary / --text-muted
   NUNCA mezclar con --action-* o --color-primary.

   REGLA 3 — Estados del sistema
   Usar state-success / state-error / state-warning / state-info
   para feedback de acciones ("guardado", "error de formulario").

   REGLA 4 — Motion
   Usar --transition-btn / --transition-input / --transition-card.
   Para valores numéricos de transform:
     transform: translateY(var(--card-hover-lift-y));

   REGLA 5 — Accesibilidad (WCAG obligatorio)
   Texto interactivo: ratio mínimo 4.5:1 (AA).
   Componentes UI: ratio mínimo 3:1 (1.4.11).
   NUNCA suprimir outline sin reemplazar con:
     box-shadow: var(--input-shadow-focus-neutral);

   REGLA 6 — Theming (cero valores fijos en componentes)
   Todo token de componente debe referenciar un token de escala.

   JERARQUÍA DE SUPERFICIES (dark mode):
   Delta mínimo +2.5% L entre cada nivel.
   bg-base → bg-surface → bg-elevated → bg-subtle

   EASING DISPONIBLE:
   --ease-standard  Transiciones generales de UI
   --ease-spring    Celebración, badges, contadores
   --ease-out       Elementos que entran a pantalla
   --ease-in        Elementos que salen de pantalla
   ============================================================ */


/* ============================================================
   UTILIDADES SEMÁNTICAS — KPI, Superficies, Actividad

   REGLA: Estas clases son OBLIGATORIAS en su contexto.
   No reemplazarlas con clases de Tailwind planas.

   .kpi-value / .kpi-label → datos numéricos en dashboards
   .surface-hero            → banners, headers de sección
   .surface-glass           → overlays flotantes, panels vidrio
   .indicator-live          → dot pulsante de actividad en vivo
   .badge-pulse             → badge con pulso de atención
   ============================================================ */


/* ── KPI — Tipografía de datos ───────────────────────────────
   Contraste tipográfico dramático para métricas numéricas.
   OBLIGATORIO en KPIs. PROHIBIDO usar text-4xl font-bold plano.

   Uso:
   <div class="card-tinted">
     <span class="kpi-label">Usuarios activos</span>
     <span class="kpi-value">24.8K</span>
   </div>
   ─────────────────────────────────────────────────────────── */

.kpi-value {
  font-family: var(--font-display);
  font-size: var(--text-4xl);
  font-weight: var(--font-bold);
  line-height: var(--leading-tight);
  color: var(--text-primary);
  letter-spacing: -0.025em;
  font-variant-numeric: tabular-nums;
}

.kpi-label {
  font-family: var(--font-body);
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
  line-height: var(--leading-normal);
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.06em;
}


/* ── Jerarquía de Superficies ────────────────────────────────
   surface-hero:  Banners, hero sections, CTAs de alta jerarquía.
                  Texto sobre este fondo SIEMPRE en white/light.
   surface-glass: Overlays flotantes, tooltips ricos, panels glass.
                  Funciona en light y dark mode automáticamente.
   ─────────────────────────────────────────────────────────── */

.surface-hero {
  background: var(--gradient-hero);
  color: var(--color-primary-text);
  position: relative;
  overflow: hidden;

  /* Brillo sutil en esquina superior derecha — profundidad */
  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(
      ellipse at top right,
      rgba(255, 255, 255, 0.10) 0%,
      transparent 60%
    );
    pointer-events: none;
  }
}

.surface-glass {
  background: var(--bg-glass-surface);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid var(--border-subtle);
  box-shadow: var(--shadow-md);
}


/* ── Indicadores de Actividad ────────────────────────────────
   indicator-live: Dot verde pulsante.
                   Indica sistema activo, conexión online, real-time.
   badge-pulse:    Pulso de atención en un badge/chip.
                   Para alertas nuevas, conteos sin leer.

   REGLA GSAP: Las animaciones de entrada usan GsapAnimationsService.
   Estas utilidades son SOLO para animaciones de estado continuo (loops).
   ─────────────────────────────────────────────────────────── */

@keyframes ds-pulse-ring {
  0%   { transform: scale(1);   opacity: 0.7; }
  70%  { transform: scale(2.4); opacity: 0;   }
  100% { transform: scale(2.4); opacity: 0;   }
}

@keyframes ds-badge-pop {
  0%   { transform: scale(1);    }
  40%  { transform: scale(1.10); }
  70%  { transform: scale(0.97); }
  100% { transform: scale(1);    }
}

.indicator-live {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);

  /* Dot base (color success) */
  &::before {
    content: '';
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: var(--radius-full);
    background: var(--state-success);
    flex-shrink: 0;
    position: relative;
    z-index: 1;
  }

  /* Onda pulsante */
  &::after {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 8px;
    height: 8px;
    border-radius: var(--radius-full);
    background: var(--state-success);
    animation: ds-pulse-ring 2.4s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
    z-index: 0;
  }
}

.badge-pulse {
  animation: ds-badge-pop 2.8s var(--ease-spring) infinite;
}

@media (prefers-reduced-motion: reduce) {
  .indicator-live::after,
  .badge-pulse {
    animation: none;
  }
}